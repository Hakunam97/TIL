STP
===

STP란?
---

(Spanning Tree Protocol, L2 네트워크의 가용성 증가 및 Loop 방지)

Switch는 **Flooding(BUM Traffic)** 때문에 이중화 구성을 하는 경우 Switch에 L2 frame이 들어오면 입력 port(ingress port)를 제외한 연결되어 있는 나머지 모든 port(egress port)로 전달하는 특성이 있음 ---> **Loop 발생**

위와 같은 Loop 발생을 방지하기 위해 Switch끼리 Switch의 정보를 가지고 Loop 발생 지점 중 한 곳에 L2 frame이 전달되지 못하도록 **차단(Block)하여 Tree 구조를 생성하는 Protocol**이다.

- Spanning (스위치가 확장되는) Tree (트리 구조) Protocol

- STP가 설정되어 있는 Switch는 자동 협상을 진행하여 Tree 구조를 만들고   
  주 경로에 문제가 발생하면 보조 경로의 BLK 상태인 port를 Forwarding 상태로 바꿔서 통신이 가능 

- STP는 물리적으로 Graph 구조의 Topology를 논리적인 Tree 구조의 Topology로 바꿔주는 Protocol   
  ---> 가용성 확보 및 Loop 방지


STP 종류
---

### (1) STP (IEEE 802.1D)

---> Cisco PVST(Per Vlan Spanning Tree) --->  PVST+ (Cisco에서 STP를 VLAN 별로 독립적 작동)

- VLAN 별로 STP를 독립적으로 작동시켜 부하 분산이 가능하다는 장점이 있다.

- Down --> Block --> Forward  으로 변하는 시간 = **Convergence Time(수렴시간)**


### (2) RSTP (Rapid STP)   
---> Cisco Rapid-PVST+ (IEEE 802.1W)

- 작동원리는 STP와 같이잠 수렴시간이 STP에 비해 **매우 짧음**


### (3) MSTP (Multiple STP)   
IEEE 802.1S

- VLAN 별로 독립적으로 STP가 동작하다 보면 VLAN이 너무 많은 네트워크에서는 STP를 협상하는 BPDU traffic이 과도하게 만들어 진다.

- 이를 해결하기 위해